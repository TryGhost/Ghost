#!/usr/bin/env node

/**
 * Script to minify a given file
 *
 * Usage: bin/minify <source> <destination>
 */

const path = require('path');
const Minifier = require('../index');

if (process.argv.length !== 4) {
    console.error('Usage: bin/minify <source> <destination>');
    process.exit(1);
}

const src = path.parse(process.argv[2]);
const dest = path.parse(process.argv[3]);
const minifier = new Minifier({src: src.dir, dest: dest.dir});

(async () => {
    try {
        await minifier.minify({
            [dest.base]: src.base
        });
    } catch (error) {
        console.error(error);

        process.exit(1);
    }
})();
