<button type="button" class="flex pointer flex-row items-center gh-cp-membertier-details {{if this.showDetails "
    rotate"}}" {{on "click" this.toggleSubscriptionExpanded}} aria-label="Show details">
    Details {{svg-jar "arrow-right-stroke"}}
</button>
<div class="gh-membertier-advanced {{unless this.showDetails " hide"}}" data-test-subscription={{@index}}>
    <div class="gh-membertier-details-container">
        <div class="gh-membertier-details">
            <p>
                Created&nbsp;&mdash;&nbsp;<span>{{@sub.startDate}}</span>
            </p>
            {{#if (eq @sub.attribution.referrerSource 'Unknown')}}
            {{else}}
            <p>
                Source&nbsp;&mdash;&nbsp;<span>{{@sub.attribution.referrerSource}}</span>
            </p>
            {{/if}}
            {{#if (and @sub.attribution @sub.attribution.url @sub.attribution.title)}}
            <p>
                Page&nbsp;&mdash;&nbsp;<a href="{{@sub.attribution.url}}" target="_blank" rel="noopener noreferrer">{{ @sub.attribution.title }}</a>
            </p>
            {{/if}}
        </div>
        {{#if (or @sub.cancellationReason @sub.offer_redemptions.length)}}
        <div class="gh-membertier-offer-cancellation">
            {{#if @sub.cancellationReason}}
            <div>
                <h4>Cancellation reason</h4>
                <div class="gh-membertier-cancelreason">{{@sub.cancellationReason}}</div>
            </div>
            {{/if}}
            {{#each @sub.offer_redemptions as |offer|}}
                {{#if (eq offer.type "trial")}}
                <div>
                    <h4>Offer</h4>
                    <span class="gh-cp-membertier-pricelabel"> {{offer.name}} </span>
                    &ndash; {{offer.amount}} days free
                </div>
                {{else if (eq offer.type "free_months")}}
                <div>
                    <h4>Offer</h4>
                    <span class="gh-cp-membertier-pricelabel"> {{offer.name}} </span>
                    &ndash; {{offer.amount}} {{if (eq offer.amount 1) "month" "months"}} free
                </div>
                {{else}}
                <div>
                    <h4>Offer</h4>
                    <span class="gh-cp-membertier-pricelabel"> {{offer.name}}
                    {{#if (eq offer.type 'fixed')}}
                    &ndash; {{currency-symbol offer.currency}}{{gh-price-amount offer.amount}} off
                    {{else}}
                    &ndash; {{offer.amount}}% off
                    {{/if}}
                    </span>
                </div>
                {{/if}}
            {{/each}}
        </div>
        {{/if}}
    </div>
</div>
