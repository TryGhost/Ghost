{{#gh-content-view-container as |previewIsHidden|}}
<header class="view-header">
    {{#gh-view-title openMobileMenu="openMobileMenu"}}<span>Content</span>{{/gh-view-title}}
    <section class="view-actions">
        {{#link-to "editor.new" class="btn btn-green" title="New Post"}}New Post{{/link-to}}
    </section>
</header>

<div class="view-container">
    <section class="content-list js-content-list {{if postListFocused 'keyboard-focused'}}">
        {{#gh-infinite-scroll tagName="section" classNames="content-list-content js-content-scrollbox" fetch="loadNextPage" as |checkScroll|}}
            <ol class="posts-list">
                {{#each sortedPosts key="id" as |post|}}
                    {{#gh-posts-list-item post=post onDoubleClick="openEditor" onDelete=(action checkScroll) as |component|}}
                        {{#link-to (if previewIsHidden 'editor.edit' 'posts.post') post.id class="permalink" title="Edit this post"}}
                            <h3 class="entry-title">{{post.title}}</h3>
                            <section class="entry-meta">
                                <span class="avatar" style={{component.authorAvatarBackground}}>
                                    <img src="{{component.authorAvatar}}" title="{{component.authorName}}">
                                </span>
                                <span class="author">{{component.authorName}}</span>
                                <span class="status">
                                    {{#if component.isPublished}}
                                        {{#if post.page}}
                                            <span class="page">Page</span>
                                        {{else}}
                                            <time datetime="{{post.publishedAt}}" class="date published">
                                                Published {{gh-format-timeago post.publishedAt}}
                                            </time>
                                        {{/if}}
                                    {{else}}
                                        <span class="draft">Draft</span>
                                    {{/if}}
                                </span>
                            </section>
                        {{/link-to}}
                    {{/gh-posts-list-item}}
                {{/each}}
            </ol>
        {{/gh-infinite-scroll}}
    </section>
    <section class="content-preview js-content-preview {{if postContentFocused 'keyboard-focused'}}">
        {{outlet}}
    </section>
    <div class="tour-cover"></div>
    <div id="tour-1" class="tour-wrapper" style="top: calc(97px/2); left: 33%;">
        <span class="throbber" style="margin: -7px 0 0 -7px;"></span>
        <div class="popover tour">
            <div class="popover-item popover-triangle-top">
                <h3 class="popover-title">Managing your content</h3>
                <div class="popover-body">
                    <p>The content screen is where all your blogâ€™s posts live. You can browse through them just like you would an email inbox; with posts on the left and a preview on the right. <strong>Double click on any post to edit it!</strong></p>
                </div>
                <footer class="popover-foot">
                    <small class="tour-optout">
                        Not your first time? <a href="#">Opt out of these tips</a>
                    </small>
                    <a class="tour-dismiss btn btn-blue" href="#">Ok, Got it</a>
                </footer>
            </div>
        </div>
    </div>
</div>
{{/gh-content-view-container}}

{{#if showDeletePostModal}}
    {{gh-fullscreen-modal "delete-post"
                          model=currentPost
                          close=(action "toggleDeletePostModal")
                          modifier="action wide"}}
{{/if}}
